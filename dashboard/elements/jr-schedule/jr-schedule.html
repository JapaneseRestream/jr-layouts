<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/vaadin-material-theme/vaadin-grid.html">
<link rel="import" href="../../../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="../../../bower_components/vaadin-grid/vaadin-grid-column.html">
<link rel="import" href="../../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">

<dom-module id="jr-schedule">
	<template>
		<style>
			#container {
				display: flex;
				flex-flow: column nowrap;
				height: 100vh;
				width: 100vw;
			}

			#control,
			#currentRunInfo,
			#grid {
				padding: 10px 10px;
			}

			vaadin-grid {
				flex-grow: 1;
			}

			#editDialog {
				width: 60vw;
			}
		</style>

		<div id="container">
			<div id="control">
				<paper-button raised on-click="previousRun">前のゲーム</paper-button>
				<paper-button raised on-click="loadEdit">編集</paper-button>
				<paper-button raised on-click="nextRun">次のゲーム</paper-button>
			</div>
	
			<div id="currentRunInfo">
				<div>タイトル：[[game]]</div>
				<div>解説：[[calcCommentator(commentator)]]</div>
				<div>カテゴリー：[[category]]</div>
				<div>走者：[[runners]]</div>
			</div>
	
			<vaadin-grid id="grid" aria-label="ゲーム一覧" items="[[schedule]]">
				<vaadin-grid-column width="120px" flex-grow="0">
					<template>
						<paper-button raised on-click="setCurrentRunByIndex">
							選択
						</paper-button>
					</template>
				</vaadin-grid-column>
				<vaadin-grid-column>
					<template class="header">開始予定</template>
					<template>[[unixTimeToString(item.scheduled)]]</template>
				</vaadin-grid-column>
				<vaadin-grid-column>
					<template class="header">タイトル</template>
					<template>[[item.game]]</template>
				</vaadin-grid-column>
				<vaadin-grid-column>
					<template class="header">カテゴリー</template>
					<template>[[item.category]]</template>
				</vaadin-grid-column>
				<vaadin-grid-column>
					<template class="header">走者</template>
					<template>[[item.runners]]</template>
				</vaadin-grid-column>
			</vaadin-grid>
		</div>
		
		<paper-dialog id="editDialog">
			<paper-input
			label="ゲーム"
			always-float-label
			value="{{editingGame}}"></paper-input>
			<paper-input
			label="カテゴリー"
			always-float-label
			value="{{editingCategory}}"></paper-input>
			<paper-input
			label="解説"
			always-float-label
			value="{{editingCommentator}}"></paper-input>
			<paper-input
			label="走者"
			always-float-label
			value="{{editingRunners}}"></paper-input>
			<paper-button raised on-click="saveEdit">保存</paper-button>
			<paper-button raised dialog-dismiss autofocus>キャンセル</paper-button>
		</paper-dialog>
		
	</template>
	<script src="jr-schedule.js"></script>
</dom-module>
